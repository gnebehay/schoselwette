{% extends "base.html" %}

{% block content %}

<main class="page page--ranking">

<h1>{{ match.team1.name }} - {{ match.team2.name }}</h1>

{% if not match.editable %}

{{ match.goals_team1 if match.outcome is not none }} -
{{ match.goals_team2 if match.outcome is not none }}

<br>

{% if current_user.admin %}

<form action="{{ url_for('match', match_id=match.id) }}" method="post" name="main">
{{ form.hidden_tag() }}
{{ render_field(form.goals_team1) }}
{{ render_field(form.goals_team2) }}
  <input type="submit" value="Save">
</form>

{% if match.stage == 'Final' %}
<a href='{{ url_for('make_champion', team_id=match.team1.id) }}'>Make {{ match.team1.name}} champion</a><br>
<a href='{{ url_for('make_champion', team_id=match.team2.id) }}'>Make {{ match.team2.name}} champion</a><br>
<a href='{{ url_for('make_champion', team_id=0) }}'>Clear champion</a><br>
{% endif %}

{% endif %}

Odds: {{ '%0.2f' | format(match.odds['1']) }} {{ '%0.2f' | format(match.odds['X']) }} {{'%0.2f'| format(match.odds['2']) }}

<table class="table table--match">
  <thead class='table__thead'>
    <th class='table__th'>Name</th>
    <th class='table__th'>Bet</th>
    <th class='table__th'>Points</th>
  </thead>
    <tbody>

{% for bet in match.bets_sorted %}

{% if bet.valid %}

<tr>
<td class="table__td"><a href='{{ url_for('user', user_id=bet.user.id) }}'>{{ bet.user.name }}</a></td>
<td class="table__td">{{ bet.outcome }} {{ '*' if bet.supertip }}</td>
<td class="table__td">{{ '%0.2f' | format(bet.points) }}</td>
</tr>

{% endif %}

{% endfor %}
  </tbody>
<table>

{% endif %}

</main>

{% endblock %}
