{% extends "base.html" %}

{% block content %}

<h1>Bets</h1>
<form action="/main" method="post" name="main">
{{ form.hidden_tag() }}

<p>You have {{ current_user.points }} points.<br>
You marked {{ current_user.supertips }}/{{ current_user.MAX_SUPERTIPS }} super bets.</p>

{{ form.champion_id.label }}
{% if current_user.champion_editable %}
{{ render_field(form.champion_id)}}
{% else %}
{{ current_user.champion.name }}
{% endif %}

<br>
<br>

<table class='table-centered'>
  <tr>
    <th>Group</th>
    <th>Date</th>
    <th>Match</th>
    <th>Bet</th>
    <th>Super</th>
    <th>Outcome</th>
    <th>Odds</th>
    <th>Points</th>
    <th></th>
  </tr>

{% for bet in bets: %}

<tr>

<td>{{ bet.match.team1.group }}</td>

<td>{{ bet.match.date.strftime('%b %d, %H:%M') }}</td>

<td>{% if not bet.match.editable %}<a href='/match/{{ bet.match.id}}'>{% endif %}

{{ bet.match.team1.name }} - {{ bet.match.team2.name }}

{% if not bet.match.editable %}</a>{% endif %}

</td>

{% if bet.match.editable %}

<td>
<input type='radio' name='outcome-{{ bet.match.id }}' {% if bet.outcome == '1' %}checked{% endif %} value='1'>1
<input type='radio' name='outcome-{{ bet.match.id }}' {% if bet.outcome == 'X' %}checked{% endif %} value='X'>X
<input type='radio' name='outcome-{{ bet.match.id }}' {% if bet.outcome == '2' %}checked{% endif %} value='2'>2
</td>

<td>
<input type='checkbox' name='supertip-{{ bet.match.id }}' {% if bet.supertip %}checked{% endif %}>
</td>

<td></td>

{% else %}

<td>
<input type='radio' disabled='true' {% if bet.outcome == '1' %}checked{% endif %}>1
<input type='radio' disabled='true' {% if bet.outcome == 'X' %}checked{% endif %}>X
<input type='radio' disabled='true' {% if bet.outcome == '2' %}checked{% endif %}>2
</td>

<td>
<input type='checkbox' disabled='true' {% if bet.supertip %}checked{% endif %}>
</td>

<td>{% if bet.match.outcome is not none %}{{ bet.match.goals_team1 }}:{{ bet.match.goals_team2 }}{% endif %}</td>

<td>
{{ '%0.2f' | format(bet.match.odds['1']) }} {{ '%0.2f' | format(bet.match.odds['X']) }} {{'%0.2f'| format(bet.match.odds['2']) }}
</td>

<td>
{{ bet.points }}
</td>

{% endif %}

</tr>
{% endfor %}

</table>

<p><input type="submit" value="Save"></p>
</form>

{% endblock %}
